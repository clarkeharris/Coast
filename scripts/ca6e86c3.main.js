Parse.initialize("BA1C8ZngmJPQ6vOTvtCCJq9SEWEBBAR5vPoNuxtE","tAX4S5an89EtItKoTz8SsOrRr50VEZMoBUeshZ2J"),$(document).ready(function(){$(".upload-feature").click(function(){var a=$(this).next();a.animate({left:0==parseInt(a.css("left"),10)?-a.outerWidth():0})})});var PostModel=Parse.Object.extend({className:"UploadPhoto",defaults:{}}),ForecastModel=Parse.Object.extend({className:"SurfSpotsForecast",defaults:{}}),PostsCollection=Parse.Collection.extend({model:PostModel}),SpotsCollection=Backbone.Collection.extend({model:ForecastModel}),AppView=Parse.View.extend({className:"post-view"}),app=new AppView,HomeView=Parse.View.extend({className:"wrapper",template:_.template($(".home-view-template").text()),events:{"click .search-button":"forecastName"},initialize:function(){$(".wrapper").prepend(this.el),$(".posts-container").hide(),this.render(),this.forecastName(),$(".search-region").keydown(function(a){13===a.which&&$(".search-button").click()})},render:function(){return this.$el.html(this.template()),this},forecastName:function(){var a=this,b=(new SpotsCollection,$(".search-region").val().replace(" ","-").replace(",","").toLowerCase());$.get("http://clarkes-proxy.herokuapp.com/api/county/water-temperature/"+b).done(function(a){$(".forecast-location").html(""),$(".forecast-location").append(a.county);var b=a.celcius,c=Math.round(b);$(".water-temp-f").html(""),$(".water-temp-c").html(""),$(".water-temp-f").append(a.fahrenheit+" F"),$(".water-temp-c").append(c+" C")}),$.get("http://clarkes-proxy.herokuapp.com/api/county/wind/"+b).done(function(a){var b=_.pluck(a,"speed_kts"),c=_.first(b),d=_.pluck(a,"direction_text"),e=_.first(d);$(".wind-data").html(""),$(".wind-data").append(e+" @ "+c+" KTS");var f=_.pluck(a,"direction_degrees"),g=_.first(f);console.log(g);var h="rotate("+g+"deg)";$(".wind-pointer").html(""),$(".wind-pointer").css("-webkit-transform",h)}),$.get("http://clarkes-proxy.herokuapp.com/api/spot/all").done(function(a){_.each(a,function(a){a.county_name.toLowerCase()==b&&(currentPosition.longitude=a.longitude,currentPosition.latitude=a.latitude)})}),$.get("http://clarkes-proxy.herokuapp.com/api/county/swell/"+b).done(function(a){_.each(a,function(a){_.each(a,function(){})})}),$.get("http://clarkes-proxy.herokuapp.com/api/county/swell/"+b).done(function(b){var c=[],d=[];_.each(b,function(a){c.push(a.hour),d=d.map(function(a){return parseFloat(a.toFixed(2))}),d.push(3*a.hst)});var e={labels:c,datasets:[{label:"Swell Height",fillColor:"rgba(7,60,96,1)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",highlightFill:"rgba(95,149,214,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:d}]};a.myBarChart&&a.myBarChart.destroy();var f=document.getElementById("wave-height-chart").getContext("2d");f.canvas.width=$("#wave-height-chart").width(),f.canvas.height=$("#wave-height-chart").height(),a.myBarChart=new Chart(f).Bar(e,{scaleShowGridLines:!1,showTooltips:!0,barShowStroke:!1,scaleShowLabels:!1,showScale:!1,maintainAspectRatio:!1,responsive:!0})}),$.get("http://clarkes-proxy.herokuapp.com/api/county/tide/"+b).done(function(b){var c=_.pluck(b,"hour"),d=_.pluck(b,"tide"),e=_.filter(c,function(a,b){return b%2==0}),f=_.filter(d,function(a,b){return b%2==0}),g=f.map(Math.round),h=_.pluck(b,"date")[0];$(".date").html(""),$(".date").append(h);var b={labels:e,datasets:[{label:"Tides",fillColor:"rgba(204,204,204,1)",strokeColor:"rgba(255,255,255,1)",pointColor:"rgba(251,61,73,1)",pointStrokeColor:"rgba(220,220,220,0.0)",pointHighlightFill:"rgba(7,60,96,1)",pointHighlightStroke:"rgba(220,220,220,0.0)",data:g}]};a.myLineChart&&a.myLineChart.destroy();var i=document.getElementById("tide-chart").getContext("2d");i.canvas.width=$("#tide-chart").width(),i.canvas.height=$("#tide-chart").height(),a.myLineChart=new Chart(i).Line(b,{caleShowGridLines:!1,showTooltips:!0,barShowStroke:!1,scaleShowLabels:!1,showScale:!1,responsive:!0})}),this.googleMaps()},googleMaps:function(){function a(){var a=$(".search-region").val().replace(",","").toLowerCase();$.get("http://clarkes-proxy.herokuapp.com/api/spot/all").done(function(b){_.each(b,function(b){b.county_name.replace("-"," ").toLowerCase()==a&&(currentPosition.longitude=b.longitude,currentPosition.latitude=b.latitude)});{var c={center:new google.maps.LatLng(currentPosition.latitude,currentPosition.longitude),zoom:8,styles:[{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{visibility:"on"},{color:"#2c3e50"},{weight:.27}]},{featureType:"water",elementType:"all",stylers:[{visibility:"simplified"},{hue:"#cccccc"},{saturation:-100},{lightness:-5}]},{featureType:"landscape",elementType:"all",stylers:[{visibility:"simplified"},{hue:"#ffffff"},{saturation:-100},{lightness:100}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"simplified"},{hue:"#bbc0c4"},{saturation:-93},{lightness:31}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"},{hue:"#ffffff"},{saturation:-100},{lightness:100}]},{featureType:"road.local",elementType:"geometry",stylers:[{visibility:"simplified"},{hue:"#e9ebed"},{saturation:-90},{lightness:-8}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"on"},{hue:"#e9ebed"},{saturation:10},{lightness:69}]},{featureType:"administrative.locality",elementType:"all",stylers:[{visibility:"on"},{hue:"#2c2e33"},{saturation:7},{lightness:19}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"on"},{hue:"#bbc0c4"},{saturation:-93},{lightness:31}]},{featureType:"road.arterial",elementType:"labels",stylers:[{visibility:"simplified"},{hue:"#bbc0c4"},{saturation:-93},{lightness:-2}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"all",stylers:[{visibility:"off"}]}]};new google.maps.Map(document.getElementById("map-canvas"),c)}})}a()}}),currentPosition={};console.log(currentPosition),console.log("router file loaded");var AppRouter=Backbone.Router.extend({routes:{"":"homePage",login:"loginPage","sign-up":"signUpPage",dashboard:"dashboardPage",post:"post","profile/:username":"userProfile"},initialize:function(){console.log("router initialize"),postsCollection=new PostsCollection},homePage:function(){$(".container").html(""),$(".posts-container").html(""),new HomeView},loginPage:function(){$(".container").html(""),$(".posts-container").html(""),new LoginView},signUpPage:function(){$(".container").html(""),$(".posts-container").html(""),new SignUpView},dashboardPage:function(){$(".container").html(""),new DashboardView({model:Parse.User.current()})}}),router=new AppRouter;Backbone.history.start();